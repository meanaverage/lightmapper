<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LightMapper CAD</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/panels.css">
    <style>
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 2px solid var(--bg-color);
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header-btn {
            position: relative;
            overflow: visible;
        }

        /* Notification Panel */
        .notification-panel {
            position: fixed;
            top: 60px;
            right: 20px;
            width: 400px;
            max-height: 500px;
            background: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            overflow: hidden;
            display: none;
            backdrop-filter: blur(10px);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--header-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .notification-header h3 {
            margin: 0;
            color: var(--text-color);
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .notification-actions {
            display: flex;
            gap: 8px;
        }

        .notification-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .notification-btn:hover {
            background: var(--hover-bg);
        }

        .notification-body {
            max-height: 400px;
            overflow-y: auto;
            padding: 0;
        }

        .notification-empty {
            padding: 40px 20px;
            text-align: center;
            color: var(--text-secondary);
        }

        .notification-empty i {
            font-size: 32px;
            margin-bottom: 10px;
            opacity: 0.5;
        }

        .notification-item {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: flex-start;
            gap: 10px;
            transition: background-color 0.2s;
        }

        .notification-item:hover {
            background: var(--hover-bg);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-icon {
            flex-shrink: 0;
            width: 20px;
            text-align: center;
            margin-top: 2px;
        }

        .notification-icon.success { color: #4CAF50; }
        .notification-icon.error { color: #f44336; }
        .notification-icon.warning { color: #ff9800; }
        .notification-icon.info { color: #2196F3; }

        .notification-content {
            flex: 1;
            min-width: 0;
        }

        .notification-message {
            color: var(--text-color);
            margin: 0 0 4px 0;
            word-wrap: break-word;
        }

        .notification-time {
            color: var(--text-secondary);
            font-size: 11px;
        }

        .notification-delete {
            flex-shrink: 0;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 2px 4px;
            border-radius: 3px;
            opacity: 0;
            transition: opacity 0.2s, background-color 0.2s;
        }

        .notification-item:hover .notification-delete {
            opacity: 1;
        }

        .notification-delete:hover {
            background: var(--hover-bg);
            color: var(--text-color);
        }

        /* Dark theme adjustments */
        [data-theme="dark"] .notification-panel {
            --bg-color: rgba(42, 42, 42, 0.98);
            --header-bg: rgba(51, 51, 51, 0.98);
            --border-color: #667eea;
            --border-light: #555;
            --text-color: #ffffff;
            --text-secondary: #aaa;
            --hover-bg: rgba(255, 255, 255, 0.1);
            background: rgba(42, 42, 42, 0.98) !important;
        }

        /* Light theme adjustments */
        [data-theme="light"] .notification-panel {
            --bg-color: rgba(255, 255, 255, 0.98);
            --header-bg: rgba(248, 249, 250, 0.98);
            --border-color: #667eea;
            --border-light: #e9ecef;
            --text-color: #333333;
            --text-secondary: #666666;
            --hover-bg: rgba(0, 0, 0, 0.05);
            background: rgba(255, 255, 255, 0.98) !important;
        }

        /* Default (fallback) theme - solid background */
        .notification-panel {
            --bg-color: rgba(255, 255, 255, 0.98);
            --header-bg: rgba(248, 249, 250, 0.98);
            --border-color: #667eea;
            --border-light: #e9ecef;
            --text-color: #333333;
            --text-secondary: #666666;
            --hover-bg: rgba(0, 0, 0, 0.05);
            background: rgba(255, 255, 255, 0.98) !important;
        }
    </style>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path fill=%22%23ffd700%22 d=%22M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z%22/></svg>">
</head>
<body>
    <div class="cad-interface">
        <!-- Application Header -->
        <header class="cad-header">
            <div class="app-title">
                <i class="fas fa-lightbulb"></i>
                <span>LightMapper CAD</span>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="refreshBtn" title="Refresh">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="header-btn" id="settingsBtn" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="header-btn" id="notificationBtn" title="Notification History">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                </button>
            </div>
        </header>

        <!-- Notification Panel -->
        <div class="notification-panel" id="notificationPanel">
            <div class="notification-header">
                <h3>
                    <i class="fas fa-bell"></i>
                    Notification History
                </h3>
                <div class="notification-actions">
                    <button class="notification-btn" id="clearNotifications" title="Clear All">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="notification-btn" id="closeNotifications" title="Close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="notification-body" id="notificationHistory">
                <div class="notification-empty">
                    <i class="fas fa-bell-slash"></i>
                    <p>No notifications yet</p>
                </div>
            </div>
        </div>

        <!-- Ribbon Toolbar -->
        <div class="ribbon-container">
            <div class="ribbon-tabs">
                <button class="ribbon-tab active" data-tab="home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="ribbon-tab" data-tab="insert">
                    <i class="fas fa-plus"></i>
                    <span>Insert</span>
                </button>
                <button class="ribbon-tab" data-tab="modify">
                    <i class="fas fa-edit"></i>
                    <span>Modify</span>
                </button>
                <button class="ribbon-tab" data-tab="view">
                    <i class="fas fa-eye"></i>
                    <span>View</span>
                </button>
                <button class="ribbon-tab" data-tab="scenes">
                    <i class="fas fa-palette"></i>
                    <span>Scenes</span>
                </button>
            </div>
            
            <div class="ribbon-content">
                <!-- Home Tab -->
                <div class="ribbon-panel active" data-panel="home">
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Area</div>
                        <div class="ribbon-tools ribbon-tools-vertical">
                            <div class="area-selector">
                                <select id="areaSelector" class="area-dropdown" title="Select Home Assistant Area">
                                    <option value="">Loading areas...</option>
                                </select>
                            </div>
                            <div class="area-actions">
                                <button class="ribbon-tool-small" id="save-floorplan-btn" title="Save Floorplan">
                                    <i class="fas fa-save"></i>
                                    <span>Save</span>
                                </button>
                                <button class="ribbon-tool-small" id="load-floorplan-btn" title="Load Floorplan">
                                    <i class="fas fa-folder-open"></i>
                                    <span>Load</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Select</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool active" id="select-tool" title="Select Objects">
                                <i class="fas fa-mouse-pointer"></i>
                                <span>Select</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Draw</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="room-tool" title="Draw Room">
                                <i class="fas fa-draw-polygon"></i>
                                <span>Room</span>
                            </button>
                            <button class="ribbon-tool" id="line-tool" title="Draw Line">
                                <i class="fas fa-slash"></i>
                                <span>Line</span>
                            </button>
                            <button class="ribbon-tool" id="text-tool" title="Add Text">
                                <i class="fas fa-font"></i>
                                <span>Text</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Lights</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="light-tool" title="Add Light">
                                <i class="fas fa-lightbulb"></i>
                                <span>Light</span>
                            </button>
                            <button class="ribbon-tool" id="light-style-btn" title="Light Style">
                                <i class="fas fa-palette"></i>
                                <span>Style</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">View</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="zoom-in-btn" title="Zoom In">
                                <i class="fas fa-search-plus"></i>
                                <span>Zoom In</span>
                            </button>
                            <button class="ribbon-tool" id="zoom-out-btn" title="Zoom Out">
                                <i class="fas fa-search-minus"></i>
                                <span>Zoom Out</span>
                            </button>
                            <button class="ribbon-tool" id="fit-screen-btn" title="Fit Screen">
                                <i class="fas fa-expand-arrows-alt"></i>
                                <span>Fit</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Insert Tab -->
                <div class="ribbon-panel" data-panel="insert">
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Objects</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="background-tool" title="Background Image">
                                <i class="fas fa-image"></i>
                                <span>Background</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Labels</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="ip-labels-btn" title="Show IP Address Labels">
                                <i class="fas fa-network-wired"></i>
                                <span>IP Labels</span>
                            </button>
                            <button class="ribbon-tool" id="hostname-labels-btn" title="Show Hostname Labels">
                                <i class="fas fa-server"></i>
                                <span>Hostnames</span>
                            </button>
                            <button class="ribbon-tool" id="mac-labels-btn" title="Show MAC Address Labels">
                                <i class="fas fa-ethernet"></i>
                                <span>MAC Labels</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Modify Tab -->
                <div class="ribbon-panel" data-panel="modify">
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Edit</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="rotate-btn" title="Rotate">
                                <i class="fas fa-redo"></i>
                                <span>Rotate</span>
                            </button>
                            <button class="ribbon-tool" id="delete-btn" title="Delete">
                                <i class="fas fa-trash"></i>
                                <span>Delete</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Order</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="bring-to-front-btn" title="Bring to Front">
                                <i class="fas fa-layer-group"></i>
                                <span>To Front</span>
                            </button>
                            <button class="ribbon-tool" id="send-to-back-btn" title="Send to Back">
                                <i class="fas fa-layer-group" style="transform: scaleY(-1);"></i>
                                <span>To Back</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- View Tab -->
                <div class="ribbon-panel" data-panel="view">
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Display</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool active" id="grid-toggle-btn" title="Grid">
                                <i class="fas fa-th"></i>
                                <span>Grid</span>
                            </button>
                            <button class="ribbon-tool active" id="snap-toggle-btn" title="Snap">
                                <i class="fas fa-magnet"></i>
                                <span>Snap</span>
                            </button>
                            <button class="ribbon-tool active" id="labels-toggle-btn" title="Labels">
                                <i class="fas fa-tag"></i>
                                <span>Labels</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Mode</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool active" id="state-mode-toggle-btn" title="Current State">
                                <i class="fas fa-home"></i>
                                <span>Current</span>
                            </button>
                            <button class="ribbon-tool" id="theme-toggle-btn" title="Theme">
                                <i class="fas fa-sun"></i>
                                <span>Light</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Scenes Tab -->
                <div class="ribbon-panel" data-panel="scenes">
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Scene Actions</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="saveScene" title="Save Scene">
                                <i class="fas fa-save"></i>
                                <span>Save</span>
                            </button>
                            <button class="ribbon-tool" id="applyScene" title="Apply Scene">
                                <i class="fas fa-play"></i>
                                <span>Apply</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ribbon-group">
                        <div class="ribbon-group-title">Layout</div>
                        <div class="ribbon-tools">
                            <button class="ribbon-tool" id="save-layout-btn" title="Save Layout">
                                <i class="fas fa-save"></i>
                                <span>Save</span>
                            </button>
                            <button class="ribbon-tool" id="load-layout-btn" title="Load Layout">
                                <i class="fas fa-folder-open"></i>
                                <span>Load</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Interface -->
        <div class="main-interface">
            <!-- Left Panel -->
            <div class="left-panel">
                <div class="panel-tabs">
                    <button class="panel-tab sidebar-tab active" data-panel="lights">
                        <i class="fas fa-lightbulb"></i>
                        <span>Lights</span>
                    </button>
                    <button class="panel-tab sidebar-tab" data-panel="liveState">
                        <i class="fas fa-broadcast-tower"></i>
                        <span>Live</span>
                    </button>
                    <button class="panel-tab" data-panel="layers">
                        <i class="fas fa-layer-group"></i>
                        <span>Layers</span>
                    </button>
                    <button class="panel-tab" data-panel="debug">
                        <i class="fas fa-bug"></i>
                        <span>Debug</span>
                    </button>
                </div>
                
                <div class="panel-content">
                    <!-- Lights Panel -->
                    <div class="panel-section active" data-section="lights" id="lightsPanel">
                        <!-- Content will be rendered by LightsPanel -->
                    </div>
                    
                    <!-- Live State Panel -->
                    <div class="panel-section" data-section="liveState" id="liveStatePanel">
                        <!-- Content will be rendered by LiveStatePanel -->
                    </div>
                    
                    <!-- Layers Panel -->
                    <div class="panel-section" data-section="layers">
                        <div class="panel-header">
                            <h3>Layers</h3>
                            <div class="panel-controls">
                                <button class="panel-btn" title="New Layer">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="panel-btn" title="Delete Layer">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="layers-container">
                            <div class="layer-item active" data-layer="lights">
                                <div class="layer-visibility" data-layer-toggle="visibility" data-layer-id="lights">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="layer-name">Lights</div>
                                <div class="layer-lock" data-layer-toggle="lock" data-layer-id="lights">
                                    <i class="fas fa-unlock"></i>
                                </div>
                            </div>
                            <div class="layer-item active" data-layer="rooms">
                                <div class="layer-visibility" data-layer-toggle="visibility" data-layer-id="rooms">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="layer-name">Rooms</div>
                                <div class="layer-lock" data-layer-toggle="lock" data-layer-id="rooms">
                                    <i class="fas fa-unlock"></i>
                                </div>
                            </div>
                            <div class="layer-item active" data-layer="background">
                                <div class="layer-visibility" data-layer-toggle="visibility" data-layer-id="background">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="layer-name">Background</div>
                                <div class="layer-lock" data-layer-toggle="lock" data-layer-id="background">
                                    <i class="fas fa-unlock"></i>
                                </div>
                            </div>
                            <div class="layer-item active" data-layer="grid">
                                <div class="layer-visibility" data-layer-toggle="visibility" data-layer-id="grid">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="layer-name">Grid</div>
                                <div class="layer-lock" data-layer-toggle="lock" data-layer-id="grid">
                                    <i class="fas fa-unlock"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Debug Panel -->
                    <div class="panel-section" data-section="debug" id="debugPanel">
                        <!-- Content will be rendered by DebugPanel -->
                    </div>
                </div>
            </div>

            <!-- Drawing Area -->
            <div class="drawing-area" id="canvas-container">
                <div class="canvas-container">
                    <canvas id="floorplan-canvas"></canvas>
                </div>
                
                <!-- Selected Light Indicator -->
                <div id="selectedLightIndicator" class="selected-light-indicator">
                    <span class="indicator-icon">â€¢</span>
                    <span class="indicator-text">Selected: <strong id="selectedLightName">None</strong></span>
                </div>
            </div>

            <!-- Entity Panel (Photoshop-style) -->
            <div class="entity-panel" id="entityPanel">
                <div class="entity-panel-tabs">
                    <button class="entity-tab sidebar-tab active" data-panel="entities">
                        <i class="fas fa-lightbulb"></i>
                        <span>Entities</span>
                    </button>
                    <!-- Future tabs can be added here -->
                    <button class="entity-panel-toggle" id="entityPanelToggle" title="Collapse Entity Panel">&raquo;</button>
                </div>
                
                <div class="entity-panel-content" id="entitiesPanel">
                    <!-- Content will be rendered by EntitiesPanel -->
                </div>
            </div>

            <!-- Draggable divider for right panel resize -->
            <div class="vertical-divider" id="rightDivider"></div>

            <!-- Right Panel -->
            <div class="right-panel" id="rightPanel">
                <div class="panel-tabs">
                    <button class="panel-tab sidebar-tab active" data-panel="properties">
                        <i class="fas fa-sliders-h"></i>
                        <span>Properties</span>
                    </button>
                    <button class="panel-tab sidebar-tab" data-panel="scenes">
                        <i class="fas fa-palette"></i>
                        <span>Scenes</span>
                    </button>
                    <button class="panel-tab sidebar-tab" data-panel="sceneEditor">
                        <i class="fas fa-edit"></i>
                        <span>Editor</span>
                    </button>
                </div>
                
                <div class="panel-content">
                    <!-- Properties Panel -->
                    <div class="panel-section active" data-section="properties" id="propertiesPanel">
                        <!-- Content will be rendered by PropertiesPanel -->
                    </div>
                    
                    <!-- Scenes Panel -->
                    <div class="panel-section" data-section="scenes" id="scenesPanel">
                        <!-- Content will be rendered by ScenesPanel -->
                    </div>
                    
                    <!-- Scene Editor Panel -->
                    <div class="panel-section" data-section="sceneEditor" id="sceneEditorPanel">
                        <!-- Content will be rendered by SceneEditorPanel -->
                    </div>
                </div>
            </div>

            <!-- Draggable divider for left panel resize -->
            <div class="vertical-divider" id="leftDivider"></div>
        </div>

        <!-- Command Palette -->
        <div class="command-palette">
            <div class="command-input-container">
                <span class="command-prompt">Command:</span>
                <input type="text" id="commandInput" class="command-input" placeholder="Type a command...">
                <div class="command-suggestions" id="commandSuggestions"></div>
            </div>
            <div class="command-status">
                <span id="commandStatus">Ready</span>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-left">
                <div class="status-item">
                    <span class="status-label">Coordinates:</span>
                    <span id="mouseCoordinates">0, 0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Selected:</span>
                    <span id="selectedCount">0</span>
                </div>
            </div>
            
            <div class="status-right">
                <div class="status-item">
                    <span class="status-label">Zoom:</span>
                    <span id="zoom-level">100%</span>
                </div>
                <div class="status-toggle" id="gridStatus">
                    <i class="fas fa-th"></i>
                    <span>GRID</span>
                </div>
                <div class="status-toggle" id="snapStatus">
                    <i class="fas fa-magnet"></i>
                    <span>SNAP</span>
                </div>
                <div class="status-toggle" id="orthoStatus">
                    <i class="fas fa-square"></i>
                    <span>ORTHO</span>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <h3>Interface Settings</h3>
                    <p>Configure your CAD interface preferences:</p>
                    <div class="settings-info">
                        <div class="info-item">
                            <strong>Keyboard Shortcuts:</strong>
                            <ul>
                                <li><strong>S:</strong> Select tool</li>
                                <li><strong>L:</strong> Light tool</li>
                                <li><strong>R:</strong> Room tool</li>
                                <li><strong>Delete:</strong> Delete selected objects</li>
                                <li><strong>Ctrl+S:</strong> Save layout</li>
                                <li><strong>Ctrl+O:</strong> Load layout</li>
                                <li><strong>Space:</strong> Pan view</li>
                                <li><strong>Scroll:</strong> Zoom in/out</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification History Panel -->
        <div id="notificationPanel" class="notification-panel" style="display: none;">
            <div class="notification-header">
                <h3><i class="fas fa-bell"></i> Notification History</h3>
                <div class="notification-actions">
                    <button class="notification-btn" id="clearNotifications" title="Clear All">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="notification-btn" id="closeNotifications" title="Close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="notification-body" id="notificationHistory">
                <div class="notification-empty">
                    <i class="fas fa-bell-slash"></i>
                    <p>No notifications yet</p>
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="statusMessages" class="status-messages"></div>
    </div>

    <!-- Scripts -->
    <script src="js/fabric.min.js"></script>
    <script src="js/app.js"></script>
    <script type="module">
        // Import and initialize the panel system
        import { PanelManager } from './js/panels/PanelManager.js';
        import { CanvasPanel } from './js/panels/CanvasPanel.js';
        import { LightsPanel } from './js/panels/LightsPanel.js';
        import { ScenesPanel } from './js/panels/ScenesPanel.js';
        import { LiveStatePanel } from './js/panels/LiveStatePanel.js';
        import { EntitiesPanel } from './js/panels/EntitiesPanel.js';
        import { PropertiesPanel } from './js/panels/PropertiesPanel.js';
        import { SceneEditorPanel } from './js/panels/SceneEditorPanel.js';
        import { LayersPanel } from './js/panels/LayersPanel.js';
        import { DebugPanel } from './js/panels/DebugPanel.js';
        
        // Initialize panel system after app.js loads
        window.addEventListener('load', () => {
            // Make PanelManager globally available
            window.panelManager = new PanelManager();
            
            // Register all panels
            window.panelManager.register(new CanvasPanel());
            window.panelManager.register(new LightsPanel());
            window.panelManager.register(new ScenesPanel());
            window.panelManager.register(new LiveStatePanel());
            window.panelManager.register(new EntitiesPanel());
            window.panelManager.register(new PropertiesPanel());
            window.panelManager.register(new SceneEditorPanel());
            window.panelManager.register(new LayersPanel());
            window.panelManager.register(new DebugPanel());
            
            // Initialize panels
            window.panelManager.init();
        });
    </script>
</body>
</html>